# This file managed by Puppet
# Changes will be overwritten on the next Puppet run.
#
# t_process_types = {
#   'main_process' => '',
#   'pre_start'    => 'pre-start ',
#   'post_start'   => 'post-start ',
#   'pre_stop'     => 'pre-stop ',
#   'post_stop'    => 'post-stop'

<%
  if ! @main_process.eql?('nil') then
    if @main_process_type == 'exec'
-%>
<%=   main_process %>exec <%= @main_process %>
<%  else -%>
<%=   main_process %>script
<%=   main_process %>
end script
<%  end -%>
<%end -%>
<%
  if ! @pre_start.eql?('nil') then
    if @pre_start_type == 'exec'
-%>
<%=   pre_start %>exec <%= @pre_start %>
<%  else -%>
<%=   pre_start %>script
<%=   pre_start %>
end script
<%  end -%>
<%end -%>
<%
  if ! @post_start.eql?('nil') then
    if @post_start_type == 'exec'
-%>
<%=   post_start %>exec <%= @post_start %>
<%  else -%>
<%=   post_start %>script
<%=   post_start %>
end script
<%  end -%>
<%end -%>
<%
  if ! @pre_stop.eql?('nil') then
    if @pre_stop_type == 'exec'
-%>
<%=   pre_stop %>exec <%= @pre_stop %>
<%  else -%>
<%=   pre_stop %>script
<%=   pre_stop %>
end script
<%  end -%>
<%end -%>
<%
  if ! @post_stop.eql?('nil') then
    if @post_stop_type == 'exec'
-%>
<%=   post_stop %>exec <%= @post_stop %>
<%  else -%>
<%=   post_stop %>script
<%=   post_stop %>
end script
<%  end -%>
<%end -%>
start on <%= @start_on %>
<% if not @stop_on.eql?('nil') then -%>
stop on <%= @stop_on %>
<% end -%>
<% if not @default_env.eql?('nil') then -%>
env <%= @default_env %>
<% end -%>
<% if not @env_export.eql?('nil') then -%>
export <%= @env_export %>
<% end -%>
<% if @is_task then -%>
task
<% end -%>
<% if @respawn then -%>
respawn
<% end -%>
<% if not @respawn_limit.eql?('nil') then -%>
respawn limit
<% end -%>
<% if not @normal_exit.eql?('nil') then -%>
normal exit <%= Array(@normal_exit).join(' ') %>
<% end -%>
<% if not @instance_name.eql?('nil') then -%>
instance <%= @instance_name %>
<% end -%>
<% if not @description.eql?('nil') then -%>
description "<%= @description %>"
<% end -%>
<% if not @author.eql?('nil') then -%>
author "<%= @author %>"
<% end -%>
<% if not @doc_version.eql?('nil') then -%>
version "<%= @doc_version %>"
<% end -%>
<% if not @emits.eql?('nil') then -%>
emits <%= Array(@emits).join(' ') %>
<% end -%>
<% if not @console.eql?('nil') then -%>
console <%= @console %>
<% end -%>
<% if not @umask.eql?('nil') then -%>
umask <%= @umask %>
<% end -%>
<% if not @nice.eql?('nil') then -%>
nice <%= @nice %>
<% end -%>
<% if not @oom.eql?('nil') then -%>
oom <%= @oom %>
<% end -%>
<% if not @chroot.eql?('nil') then -%>
chroot <%= @chroot %>
<% end -%>
<% if not @chdir.eql?('nil') then -%>
chdir <%= @chdir %>
<% end -%>
<% if not @sys_limit.eql?('nil') then -%>
limit <%= Array(@sys_limit).join(' ') %>
<% end -%>
<% if not @kill_timeout.eql?('nil') then -%>
kill timeout <%= @kill_timeout %>
<% end -%>
<% if @expect_stop then -%>
expect stop
<% end -%>
<% if @expect_daemon then -%>
expect daemon
<% end -%>
<% if @expect_fork then -%>
expect fork
<% end -%>
